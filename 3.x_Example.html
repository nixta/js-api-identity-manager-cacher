<!DOCTYPE html>
<html>
<head>
  <title>Identity Manager Caching</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <link rel="stylesheet" href="https://js.arcgis.com/3.16/esri/themes/calcite/dijit/calcite.css">
  <link rel="stylesheet" href="https://js.arcgis.com/3.16/esri/themes/calcite/esri/esri.css">
  <link rel="stylesheet" href="https://js.arcgis.com/3.16/esri/css/esri.css">
  <style>
    html,body,#mapDiv {
      padding:0;
      margin:0;
      height:100%;
    }
  </style>

  <script type="text/javascript">
  var dojoConfig = {
  	packages: [
  	{
  		name: "identity-manager-cacher",
      location: "http://nixta.github.io/js-api-identity-manager-cacher/3.x/lib/dojo"
  	}]
  };
  </script>

  <script src="http://js.arcgis.com/3.16compact/"></script>

  <script>
    var map;
    require(["esri/map",
            "esri/layers/ArcGISDynamicMapServiceLayer",
            "identity-manager-cacher/cacher",
            "dojo/domReady!"],
      function(Map, ArcGISDynamicMapServiceLayer) {
    		map = new Map("mapDiv", {
    			center: [-122.68, 45.52],
    			zoom: 10,
    			basemap: "dark-gray"
    		});

    		var trafficLayer = new ArcGISDynamicMapServiceLayer("http://traffic.arcgis.com/arcgis/rest/services/World/Traffic/MapServer");

    		map.addLayer(trafficLayer);
      }
    );
  </script>

</head>
<body class="calcite">
  <div id="mapDiv"></div>
</body>
</html>
